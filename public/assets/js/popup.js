!function(t){function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){usernoise.miniRequire.define("popup/dist/popup",["vendor/vue"],function(t){return function(i,n){var o,s,r;return o=e(10),t.config.prefix="un-",t.config.debug=!0,r=e(11),s=o.extend({},r.data(),n),r=o.extend({},r,{el:i,data:function(){return s}}),new t(r)}})},,,,,,,,,,function(t,i){t.exports=jQuery},function(t,i,e){e(12),t.exports=e(14),t.exports.template=e(47)},function(t,i){},,function(t,i,e){var n;n=e(10),t.exports={components:{feedback:e(15),"popup-overlay":e(43)},ready:function(){return n("body").append(this.$overlay=n("<div class='un-overlay un-fade-transition un-fade-enter' data-html2canvas-ignore='true'></div>")),setTimeout(function(t){return function(){return t.hidden=!1,t.$overlay.removeClass("un-fade-enter")}}(this),1),this.bindTo&&(this.layout(),n(window).on("resize.usernoise",this.onResize)),this.$overlay.on("click",function(t){return function(){return t.close()}}(this))},beforeDestroy:function(){return n(window).off("resize.usernoise")},events:{"close:request":function(){return this.close()},"background:change":function(t){return this.extraClass=t,n(this.$el).addClass(t)},"background:reset":function(){return this.extraClass?n(this.$el).removeClass(this.extraClass):void 0}},data:function(){return{hidden:!0,popupTop:null,popupLeft:null,radius:18,isLeft:!1,isRight:!1,isBottom:!1,isTop:!1,pushLeft:!1,pushRight:!1,pushBottom:!1,pushTop:!1,x:"auto",y:"auto",padding:100,divider:10}},computed:{isFixed:function(){var t;if(!this.bindTo)return!0;for(t=this.bindTo;t.size()>0;){if("fixed"===t.css("position"))return!0;t=t.parent()}return!1}},methods:{isTopAvailable:function(){return this.bindToPosition().top-this.height()>this.padding+this.radius&&this.bindToPosition().left>this.width()/this.divider&&this.bindToPosition().left+this.bindToWidth()+this.width()/this.divider<this.availableWidth()},isRightAvailable:function(){return this.bindToPosition().left+this.width()+this.bindToWidth()<=this.availableWidth()-this.padding-this.radius&&this.bindToPosition().top>this.height()/this.divider&&this.bindToPosition().top+this.bindToHeight()+this.height()/this.divider<this.availableHeight()},isBottomAvailable:function(){return this.bindToPosition().top+this.bindToWidth()+this.height<=this.availableWidth()-this.padding-this.radius&&this.bindToPosition().left>this.width()/this.divider&&this.bindToPosition().left+this.bindToWidth()+this.width()/this.divider<this.availableWidth()},isLeftAvailable:function(){return this.bindToPosition().left-this.width()>this.padding+this.radius&&this.bindToPosition().top>this.height()/this.divider&&this.bindToPosition().top+this.bindToHeight()+this.height()/this.divider<this.availableHeight()},needPushTop:function(){return this.bindToYCenter()+this.height()/2+this.padding>this.availableHeight()},needPushBottom:function(){return this.bindToYCenter()-this.height()/2<this.padding},needPushRight:function(){return console.info(this.bindToXCenter()-this.width()),this.bindToXCenter()-this.width()/2<this.padding},needPushLeft:function(){return this.bindToXCenter()+this.width()/2>this.availableWidth()-this.padding},bodyWidth:function(){return n("body").width()},bodyHeight:function(){return n("body").height()},width:function(){return n(this.$el).outerWidth()},height:function(){return n(this.$el).outerHeight()},bindToWidth:function(){return n(this.bindTo).outerWidth()},bindToHeight:function(){return n(this.bindTo).outerHeight()},bindToXCenter:function(){return this.bindToPosition().left+n(this.bindTo).outerWidth()/2},bindToYCenter:function(){return this.bindToPosition().top+n(this.bindTo).outerHeight()/2},availableHeight:function(){return this.isFixed?n(window).height():n("body").height()},availableWidth:function(){return this.isFixed?n(window).width():jQuery("body").width()},bindToPosition:function(){var t,i;return i=n(this.bindTo).offset(),this.isFixed&&(i.top-=n(window).scrollTop(),i.left-=n(window).scrollLeft()),this.offset&&(t=n.isFunction(this.offset)?this.offset():this.offset,t.left&&(i.left=i.left+t.left),t.top&&(i.top=i.top+t.top)),i},onResize:function(){return this.layout()},layout:function(){return this.isRight=this.isRightAvailable(),this.isBottom=!this.isRight&&this.isBottomAvailable(),this.isTop=!this.isBottom&&!this.isRight&&this.isTopAvailable(),this.isLeft=!this.isTop&&!this.isRight&&!this.isBottom&&this.isLeftAvailable(),this.pushTop=(this.isLeft||this.isRight)&&this.needPushTop(),this.pushBottom=(this.isLeft||this.isRight)&&this.needPushBottom(),this.pushLeft=(this.isTop||this.isBottom)&&this.needPushLeft(),this.pushRight=(this.isTop||this.isBottom)&&this.needPushRight(),this.isTop||this.isBottom?this.x=this.bindToXCenter()-this.width()/2:this.isLeft?this.x=this.bindToXCenter()-this.bindToWidth()/2-this.width()-this.radius:this.isRight&&(this.x=this.bindToXCenter()+this.bindToWidth()/2+this.radius),this.isLeft||this.isRight?this.y=this.bindToYCenter()-this.height()/2:this.isTop?this.y=this.bindToYCenter()-this.bindToHeight()/2-this.height()-this.radius:this.isBottom?this.y=this.bindToYCenter()+this.bindToHeight()/2+this.radius:void 0},close:function(){return this.hidden=!0,this.$overlay.addClass("un-fade-leave"),usernoise.window.current=null,setTimeout(function(t){return function(){return t.$overlay.remove(),t.$destroy(!0)}}(this),300)}}}},function(t,i,e){e(16),t.exports=e(17),t.exports.template=e(42)},function(t,i){},function(t,i,e){t.exports={components:{"feedback-form":e(18),"popup-footer":e(22),"feedback-step-1":e(25),"feedback-step-2":e(33),"feedback-step-3":e(37)},data:function(){return{screen:"feedback-step-1",next:this.goToStep2,transition:"un-slide-right",form:e(41)}},methods:{gotoStep1:function(){return this.prev=null,this.transition="un-slide-left",this.screen="feedback-step-1",this.next=this.goToStep2},goToStep2:function(){return"feedback-step-3"===this.screen?this.transition="un-slide-left":this.transition="un-slide-right",this.screen="feedback-step-2",this.prev=this.gotoStep1,this.next=this.goToStep3},goToStep3:function(){return this.screen="feedback-step-3",this.prev=this.gotoStep2,this.transition="un-slide-right",this.next=null}}}},function(t,i,e){e(19),t.exports=e(20),t.exports.template=e(21)},function(t,i){},function(t,i,e){var n,o,s,r,u,a=function(t,i){function e(){this.constructor=t}for(var n in i)h.call(i,n)&&(t[n]=i[n]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t},h={}.hasOwnProperty;n=e(10),u='<label for="un-form-{{name}}" un-on="focus: onFocus">{{settings.label}}</label>',r='<div class="un-form-error" un-if="error" un-transition="un-fade">{{error}}</div>',s=function(){function t(t){this.template=t}return t.prototype.props=["name","settings","form","error","index"],t.prototype.data=function(){return{value:null}},t.prototype.ready=function(){return this.value=this.form[this.name],this.$watch("value",function(t){return function(){return t.form[t.name]=t.value}}(this))},t.prototype.methods={onFocus:function(t){return this.$dispatch("focus")}},t}(),o=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.filters={labelFilter:function(t){return t?usernoise.config.form.fields[this.name].options[t]:usernoise.config.form.fields[this.name].default_text},optionsFilter:function(t){var i,e;e=[];for(i in t)e.push({text:t[i],value:i});return e}},i.prototype.beforeDestroy=function(){},i.prototype.methods={isDefault:function(){return this.form[this.name]===usernoise.config.form.fields[this.name]["default"]},onFocus:function(t){return this.$dispatch("focus")},onSpaceDown:function(t){var i,e;return 32===t.keyCode&&(i=document.createEvent("MouseEvents"),i.initMouseEvent("mousedown",!0,!0,window),this.$$.select.dispatchEvent(i)),9===t.keyCode?(e=n("*[tabindex="+(parseInt(this.$el.attr("tabindex"))+1)+"]"),e.focus()):void 0}},i}(s),t.exports={props:["form"],data:function(){return{hasError:!1,i18n:usernoise.i18n,fields:usernoise.config.form.fields,errors:{},validators:{email:function(t,i){var e;return e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.test(i)?void 0:this.i18n["Please enter a valid email address"]},required:function(t,i){return i&&i.trim()?void 0:this.i18n["This field is required"]}}}},events:{"form:validate":function(){return this.validate(),this.hasError?void 0:this.$dispatch("form:valid")},focus:function(){return this.errors={}}},components:{email:new s(u+'<input type="email" id="un-form-{{name}}"  placeholder="{{settings.placeholder}}" un-model="value" tabindex="{{index}}" un-on="focus: onFocus">'+r),text:new s(u+'<input type="text" id="un-form-{{name}}" un-model="value" placeholder="{{settings.placeholder}}" tabindex="{{index}}" un-on="focus: onFocus">'+r),dropdown:new o(u+'<div class="un-select-wrapper" tabindex="{{index}}" un-on="keydown: onSpaceDown"><select un-el="select" un-el="select" id="un-form-{{name}}" un-model="value" options="settings.options | optionsFilter" un-on="focus: onFocus"></select><span class="un-dropdown-label" un-class="un-default: this.isDefault()" un-el="label">{{value | labelFilter}}</span><i class="un-icon-chevron"></i></div>'+r)},methods:{validate:function(){var t,i,e;this.hasError=!1,e=[];for(i in this.fields)(t=this.getErrorFor(i))?(this.errors.$set(i,t),e.push(this.hasError=!0)):e.push(this.errors[i]=null);return e},getErrorFor:function(t){var i,e,n,o,s;if(s=this.fields[t].validators)for(e=0,n=s.length;n>e;e++)if(o=s[e],this.validators[o]&&(i=this.validators[o].apply(this,[t,this.form[t]])))return i}}}},function(t,i){t.exports='<div class=un-feedback-form><div class=un-field un-repeat="field: fields"><component is={{field.type}} name={{$key}} settings={{field}} form={{@form}} index="{{$index + 1}}" error={{errors[$key]}}></component></div></div>'},function(t,i,e){e(23),t.exports.template=e(24)},function(t,i){},function(t,i){t.exports="<div class=un-popup-footer><content></content></div>"},function(t,i,e){e(26),t.exports=e(27),t.exports.template=e(32)},function(t,i){},function(t,i,e){t.exports={props:["form","next"],components:{close:e(28)},data:function(){return{i18n:usernoise.i18n,hasError:!1,canvasLoaded:!1,isTakingScreenshot:!1,supportsScreenshot:usernoise.config.screenshot&&usernoise.config.screenshot.enable}},methods:{onNextClick:function(t){return t.preventDefault(),this.isValid()?this.next():(this.hasError=!0,setTimeout(function(t){return function(){return t.hasError=!1}}(this),300))},isValid:function(){return this.form.feedback&&""!==this.form.feedback.trim()},onRemoveScreenshotClick:function(t){return t.preventDefault(),this.form.screenshot=null},onCancelScreenshotClick:function(t){return t.preventDefault(),this.isTakingScreenshot=!1},onScreenshotClick:function(t){return t.preventDefault(),this.isTakingScreenshot=!0,usernoise.miniRequire.require("vendor/html2canvas",function(t){return function(){return window.html2canvas(document.body,{proxy:usernoise.config.urls.html2canvasproxy,allowTaint:!1,letterRendering:!0,logging:!1}).then(function(i){var e;return t.isTakingScreenshot&&(e="image/"+usernoise.config.screenshot.format.toLowerCase(),t.form.screenshot=i.toDataURL(e,usernoise.config.screenshot.quality)),t.isTakingScreenshot=!1})}}(this))}}}},function(t,i,e){e(29),t.exports=e(30),t.exports.template=e(31)},function(t,i){},function(t,i,e){var n;n=e(10),t.exports={ready:function(){return n("body").on("keydown.usernoise",function(t){return function(i){return 27===i.which?t.$dispatch("close:request"):void 0}}(this))},beforeDestroy:function(){return n("body").off("keydown.usernoise")}}},function(t,i){t.exports='<i class="un-icon-close un-close" href=# un-on="click: this.$dispatch(\'close:request\')"></i>'},function(t,i){t.exports='<div class=un-feedback-step-1><close></close><h3>{{i18n[\'Leave a feedback\']}}</h3><div class=un-textarea-wrapper><textarea un-model=form.feedback placeholder="{{i18n[\'Enter your feedback here\']}}" un-class="un-has-error: hasError" tabindex=10001></textarea></div><popup-footer><a tabindex=10003 class=un-take-screenshot href=# un-on="click: onScreenshotClick" un-if="!form.screenshot && supportsScreenshot"><i class=un-icon-camera></i> {{i18n[\'Take a screenshot\']}}</a> <span class=un-screenshot-attachment un-if=form.screenshot un-on="click: onRemoveScreenshotClick"><i class=un-icon-close></i>{{i18n[\'screenshot.png\']}}</span> <button class="un-next un-button" un-on="click: onNextClick" tabindex=10002>{{i18n[\'Next\']}}<i class=un-icon-next></i></button></popup-footer><popup-overlay un-if=isTakingScreenshot un-transition=un-fade border-class=un-border-info><strong>{{i18n[\'Taking screenshot\']}}</strong> <i class=un-icon-spin></i> <button un-on="click: onCancelScreenshotClick" class=un-primary>{{i18n[\'Cancel\']}}</button></popup-overlay></div>'},function(t,i,e){e(34),t.exports=e(35),t.exports.template=e(36)},function(t,i){},function(t,i,e){t.exports={props:["form","next","prev"],components:{close:e(28)},data:function(){return{i18n:usernoise.i18n,submitting:!1,hasError:!1,ajaxError:null,fields:usernoise.config.form.fields}},ready:function(){return this.hasNoFields()?this.submit():void 0},events:{"form:valid":function(){return this.submit()}},methods:{onBackClick:function(t){return t.preventDefault(),this.prev()},onSubmitClick:function(t){return t.preventDefault(),this.$broadcast("form:validate")},hasNoFields:function(){var t;for(t in this.fields)return!1;return!0},onCancelSubmissionClick:function(t){return t.preventDefault(),this.request&&this.request.abort(),this.hasNoFields()?this.prev():void 0},onResetAjaxErrorClick:function(t){return t.preventDefault(),this.ajaxError=null,this.hasNoFields()?this.prev:void 0},submit:function(){var t;return this.submitting=!0,t=e(10),this.request=t.ajax(usernoise.config.urls.feedback.post,{type:"post",timeout:9e4,data:this.form}).done(function(t){return function(){return t.submitting=!1,t.next()}}(this)).error(function(t){return function(i,e,n){return t.submitting=!1,t.ajaxError=e+": "+n}}(this)).progress(function(t){return function(t){return console.info(t)}}(this))},onCancelSubmissionClick:function(t){return t.preventDefault(),this.request.abort(),this.submitting=!1}}}},function(t,i){t.exports="<div class=un-feedback-step-2><close></close><h3>{{i18n['Add some details']}}</h3><feedback-form form={{@form}}></feedback-form><popup-footer><a href=# tabindex=200 class=un-prev un-on=\"click: onBackClick\"><i class=un-icon-prev></i>{{i18n['Back']}}</a> <button tabindex=201 class=un-next un-on=\"click: onSubmitClick\">{{i18n['Submit']}}</button></popup-footer><popup-overlay un-if=submitting un-transition=un-fade border-class=un-border-info><i class=un-icon-spin></i><div class=un-popup-overlay-text><strong>{{i18n['Submitting']}}</strong></div><button un-on=\"click: onCancelSubmissionClick\" class=un-primary>{{i18n['Cancel']}}</button></popup-overlay><popup-overlay un-if=ajaxError un-transition=un-fade class=un-error border-class=un-border-error><i class=un-icon-gears></i><div class=un-popup-overlay-text><strong>{{i18n['Error sending feedback']}}</strong> <small>{{ajaxError}}</small></div><button un-on=\"click: onResetAjaxErrorClick\">{{i18n['Close']}}</button></popup-overlay></div>"},function(t,i,e){e(38),t.exports=e(39),t.exports.template=e(40)},function(t,i){},function(t,i){t.exports={props:["prev"],data:function(){return{i18n:usernoise.i18n}}}},function(t,i){t.exports="<div class=un-feedback-step-3><popup-overlay class=un-complete border-class=un-border-complete><i class=un-icon-check></i><div class=un-popup-overlay-text><strong>{{i18n['Done']}}</strong> <small un-if=\"!!i18n['OKText']\">{{i18n['OKText']}}</small></div><button un-on=\"click: this.$dispatch('close:request')\">{{i18n['Close']}}</button></popup-overlay></div>"},function(t,i){var e,n;e={feedback:null,screenshot:null,referer:window.location.href};for(n in usernoise.config.form.fields)e[n]="undefined"!=typeof usernoise.config.form.fields[n]["default"]?usernoise.config.form.fields[n]["default"]:null;t.exports=e},function(t,i){t.exports="<div class=un-feedback><component is={{screen}} form={{@form}} next={{next}} prev={{prev}} un-transition={{transition}}></component></div>"},function(t,i,e){e(44),t.exports=e(45),t.exports.template=e(46)},function(t,i){},function(t,i,e){t.exports={props:["border-class"],components:{close:e(28)},ready:function(){return this.$dispatch("background:change",this.borderClass)},beforeDestroy:function(){return this.$dispatch("background:reset")}}},function(t,i){t.exports="<div class=un-popup-overlay><close></close><div class=un-popup-overlay-content><content></content></div></div>"},function(t,i){t.exports='<div class="un-popup un-fade-transition" data-html2canvas-ignore=true un-style="left: x + \'px\', top: this.y + \'px\'" un-class="un-fade-enter: hidden,\n						un-fixed: isFixed,\n						un-centered: !hidden  && (!bindTo || (!isLeft && !isRight && !isBottom && !isTop)),\n						un-position-left: isLeft,\n						un-position-right: isRight,\n						un-position-bottom: isBottom,\n						un-position-top: isTop,\n						un-push-left: pushLeft,\n						un-push-right: pushRight,\n						un-push-bottom: pushBottom,\n						un-push-top: pushTop\n		" un-on="resize: onResize"><feedback></feedback></div>'}]);